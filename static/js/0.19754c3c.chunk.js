"use strict";(self.webpackChunktemp_app=self.webpackChunktemp_app||[]).push([[0],[(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var n=a(2555),t=a(5043),d=a(7697),i=a(8431),r=a(4848),c=a(579);const o=()=>{const{id:e}=(0,d.g)(),s=(0,d.Zp)(),[a,o]=(0,t.useState)(!0),[l,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)({name:"",anydeskId:"",address:"",passwords:[""],notes:"",categories:[],tags:[],customFields:[]}),u=e&&"new"!==e;(0,t.useEffect)(()=>{u&&e?x(e):o(!1)},[e,u]);const x=async e=>{try{o(!0);const a=await i.indexedDBService.getMachine(e);a?p({name:a.name,anydeskId:a.anydeskId,address:a.address||"",passwords:a.passwords.length>0?a.passwords:[""],notes:a.notes||"",categories:a.categories,tags:a.tags,customFields:a.customFields}):s("/")}catch(a){console.error("Failed to load machine:",a),s("/")}finally{o(!1)}},g=(e,s)=>{p(a=>(0,n.A)((0,n.A)({},a),{},{[e]:s}))};return a?(0,c.jsxs)("div",{className:"page-loading",children:[(0,c.jsx)(r.A,{size:"lg"}),(0,c.jsx)("p",{children:"Loading machine data..."})]}):(0,c.jsxs)("div",{className:"machine-edit",children:[(0,c.jsxs)("div",{className:"page-header",children:[(0,c.jsxs)(d.N_,{to:u?"/machine/".concat(e):"/",className:"btn btn-secondary",children:["\u2190 ",u?"Back to Machine":"Back to Dashboard"]}),(0,c.jsx)("h1",{className:"page-title",children:u?"Edit Machine":"Add New Machine"})]}),(0,c.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),h.name.trim()&&h.anydeskId.trim())if(/^\d+$/.test(h.anydeskId.trim()))try{var n;if(m(!0),!u||h.anydeskId!==(null===(n=await i.indexedDBService.getMachine(e))||void 0===n?void 0:n.anydeskId)){const s=await i.indexedDBService.getMachineByAnyDeskId(h.anydeskId.trim());if(s&&s.id!==e)return void alert("A machine with this AnyDesk ID already exists")}const a={id:u?e:crypto.randomUUID(),name:h.name.trim(),anydeskId:h.anydeskId.trim(),address:h.address.trim()||void 0,passwords:h.passwords.filter(e=>e.trim()),notes:h.notes.trim()||void 0,categories:h.categories,tags:h.tags,customFields:h.customFields,createdAt:u?(await i.indexedDBService.getMachine(e)).createdAt:new Date,updatedAt:new Date,lastAccessed:u?(await i.indexedDBService.getMachine(e)).lastAccessed:void 0,connectionCount:u?(await i.indexedDBService.getMachine(e)).connectionCount:0};u?await i.indexedDBService.updateMachine(a):await i.indexedDBService.addMachine(a),s("/machine/".concat(a.id))}catch(t){console.error("Failed to save machine:",t),alert("Failed to save machine. Please try again.")}finally{m(!1)}else alert("AnyDesk ID must contain only numbers");else alert("Name and AnyDesk ID are required")},className:"machine-form",children:[(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("h3",{children:"Basic Information"}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Machine Name *"}),(0,c.jsx)("input",{type:"text",className:"form-input",value:h.name,onChange:e=>g("name",e.target.value),placeholder:"Enter machine name",required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"AnyDesk ID *"}),(0,c.jsx)("input",{type:"text",className:"form-input",value:h.anydeskId,onChange:e=>g("anydeskId",e.target.value),placeholder:"Enter AnyDesk ID",required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Address/IP"}),(0,c.jsx)("input",{type:"text",className:"form-input",value:h.address,onChange:e=>g("address",e.target.value),placeholder:"Enter IP address or hostname"})]})]}),(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("h3",{children:"Passwords"}),h.passwords.map((e,s)=>(0,c.jsxs)("div",{className:"password-input-group",children:[(0,c.jsx)("input",{type:"password",className:"form-input",value:e,autoComplete:"new-password",onChange:e=>((e,s)=>{const a=[...h.passwords];a[e]=s,p(e=>(0,n.A)((0,n.A)({},e),{},{passwords:a}))})(s,e.target.value),placeholder:"Enter password"}),h.passwords.length>1&&(0,c.jsx)("button",{type:"button",className:"btn btn-error btn-sm",onClick:()=>(e=>{if(h.passwords.length>1){const s=h.passwords.filter((s,a)=>a!==e);p(e=>(0,n.A)((0,n.A)({},e),{},{passwords:s}))}})(s),children:"Remove"})]},s)),(0,c.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:()=>{p(e=>(0,n.A)((0,n.A)({},e),{},{passwords:[...e.passwords,""]}))},children:"Add Password"})]}),(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("h3",{children:"Additional Information"}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Notes"}),(0,c.jsx)("textarea",{className:"form-input form-textarea",value:h.notes,onChange:e=>g("notes",e.target.value),placeholder:"Enter any additional notes",rows:4})]})]}),(0,c.jsxs)("div",{className:"form-actions",children:[(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?(0,c.jsx)(r.A,{size:"sm"}):u?"Update Machine":"Create Machine"}),(0,c.jsx)(d.N_,{to:u?"/machine/".concat(e):"/",className:"btn btn-secondary",children:"Cancel"})]})]})]})}}]]);
//# sourceMappingURL=0.19754c3c.chunk.js.map