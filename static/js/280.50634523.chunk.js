"use strict";(self.webpackChunktemp_app=self.webpackChunktemp_app||[]).push([[280],{1280:(e,n,s)=>{s.r(n),s.d(n,{default:()=>m});var a=s(5043),t=s(7697),c=s(8431),o=s(4848),i=s(4967),r=s(1713);const d=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Copied to clipboard!",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Failed to copy to clipboard";const a=await(async e=>{try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),!0;const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select();const s=document.execCommand("copy");return document.body.removeChild(n),s}catch(n){return console.error("Failed to copy to clipboard:",n),!1}})(e);!function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const s=document.createElement("div");s.className="copy-feedback ".concat(n?"success":"error"),s.textContent=e,Object.assign(s.style,{position:"fixed",top:"20px",right:"20px",padding:"12px 20px",borderRadius:"8px",color:"white",fontWeight:"600",fontSize:"14px",zIndex:"10000",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transform:"translateX(100%)",transition:"transform 0.3s ease-in-out",backgroundColor:n?"#10b981":"#ef4444",maxWidth:"300px",wordWrap:"break-word"}),document.body.appendChild(s),setTimeout(()=>{s.style.transform="translateX(0)"},10),setTimeout(()=>{s.style.transform="translateX(100%)",setTimeout(()=>{document.body.contains(s)&&document.body.removeChild(s)},300)},3e3)}(a?n:s,a)};var l=s(579);const h=e=>{let{password:n,index:s}=e;const[t,c]=(0,a.useState)(!1);return(0,l.jsxs)("div",{className:"password-item",children:[(0,l.jsx)("span",{className:"password-value",children:t?n:"*".repeat(n.length)}),(0,l.jsx)("button",{className:"btn btn-sm",onClick:()=>c(!t),children:t?"Hide":"Show"}),(0,l.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>d(n,"Password copied to clipboard!"),title:"Copy password",children:"\ud83d\udccb Copy"})]})},m=()=>{const{id:e}=(0,t.g)(),n=(0,t.Zp)(),[s,m]=(0,a.useState)(null),[p,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{e&&y(e)},[e]);const y=async e=>{try{u(!0);const s=await c.indexedDBService.getMachine(e);s?m(s):n("/")}catch(s){console.error("Failed to load machine:",s),n("/")}finally{u(!1)}};return p?(0,l.jsxs)("div",{className:"page-loading",children:[(0,l.jsx)(o.A,{size:"lg"}),(0,l.jsx)("p",{children:"Loading machine details..."})]}):s?(0,l.jsxs)("div",{className:"machine-detail",children:[(0,l.jsxs)("div",{className:"page-header",children:[(0,l.jsx)(t.N_,{to:"/",className:"btn btn-secondary",children:"\u2190 Back to Dashboard"}),(0,l.jsx)("h1",{className:"page-title",children:s.name})]}),(0,l.jsxs)("div",{className:"machine-info",children:[(0,l.jsxs)("div",{className:"info-section",children:[(0,l.jsx)("h3",{children:"Basic Information"}),(0,l.jsxs)("div",{className:"info-grid",children:[(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"Machine ID"}),(0,l.jsx)("span",{className:"machine-id",children:s.id}),(0,l.jsx)("button",{className:"btn btn-secondary btn-sm copy-btn",onClick:()=>d(s.id,"Machine ID copied to clipboard!"),title:"Copy Machine ID",children:"\ud83d\udccb Copy ID"})]}),(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"AnyDesk ID"}),(0,l.jsx)("span",{className:"anydesk-id",children:s.anydeskId}),(0,l.jsx)("button",{className:"btn btn-secondary btn-sm copy-btn",onClick:()=>d(s.anydeskId,"AnyDesk ID copied to clipboard!"),title:"Copy AnyDesk ID",children:"\ud83d\udccb Copy ID"}),(0,l.jsx)(i.A,{machineId:s.id,machineName:s.name,anydeskId:s.anydeskId,size:"sm",variant:"primary"})]}),s.address&&(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"Address"}),(0,l.jsx)("span",{children:s.address})]}),(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"Created"}),(0,l.jsx)("span",{children:(0,r.Yq)(s.createdAt)})]}),s.lastAccessed&&(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"Last Accessed"}),(0,l.jsx)("span",{children:(0,r.Yq)(s.lastAccessed)})]}),(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"Connections"}),(0,l.jsxs)("span",{children:[s.connectionCount," times"]})]})]})]}),s.notes&&(0,l.jsxs)("div",{className:"info-section",children:[(0,l.jsx)("h3",{children:"Notes"}),(0,l.jsx)("p",{className:"notes",children:s.notes})]}),s.passwords.length>0&&(0,l.jsxs)("div",{className:"info-section",children:[(0,l.jsx)("h3",{children:"Passwords"}),(0,l.jsx)("div",{className:"password-list",children:s.passwords.map((e,n)=>(0,l.jsx)(h,{password:e,index:n},n))})]}),s.tags.length>0&&(0,l.jsxs)("div",{className:"info-section",children:[(0,l.jsx)("h3",{children:"Tags"}),(0,l.jsx)("div",{className:"tags-list",children:s.tags.map((e,n)=>(0,l.jsx)("span",{className:"tag",children:e},n))})]}),s.categories.length>0&&(0,l.jsxs)("div",{className:"info-section",children:[(0,l.jsx)("h3",{children:"Categories"}),(0,l.jsx)("div",{className:"categories-list",children:s.categories.map((e,n)=>(0,l.jsx)("span",{className:"category",children:e},n))})]})]}),(0,l.jsxs)("div",{className:"page-actions",children:[(0,l.jsx)(i.A,{machineId:s.id,machineName:s.name,anydeskId:s.anydeskId,size:"lg",variant:"primary"}),(0,l.jsx)(t.N_,{to:"/machine/".concat(s.id,"/edit"),className:"btn btn-secondary",children:"Edit Machine"}),(0,l.jsx)("button",{onClick:async()=>{if(s&&window.confirm("Are you sure you want to delete this machine?"))try{await c.indexedDBService.deleteMachine(s.id),n("/")}catch(e){console.error("Failed to delete machine:",e)}},className:"btn btn-error",children:"Delete Machine"})]})]}):(0,l.jsxs)("div",{className:"page-error",children:[(0,l.jsx)("h2",{children:"Machine not found"}),(0,l.jsx)(t.N_,{to:"/",className:"btn btn-primary",children:"Back to Dashboard"})]})}},1713:(e,n,s)=>{s.d(n,{Yq:()=>t,_x:()=>o,fw:()=>c});const a=e=>e?e instanceof Date?e:new Date(e):null,t=e=>{const n=a(e);return n?n.toLocaleDateString():"Never"},c=e=>{const n=a(e);if(!n)return"Never";const s=new Date,t=Math.floor((s.getTime()-n.getTime())/6e4);return t<1?"Just now":t<60?"".concat(t,"m ago"):t<1440?"".concat(Math.floor(t/60),"h ago"):t<10080?"".concat(Math.floor(t/1440),"d ago"):n.toLocaleDateString()},o=e=>{const n=a(e);if(!n)return"Never";const s=new Date,t=Math.floor((s.getTime()-n.getTime())/36e5);return t<1?"Just now":t<24?"".concat(t,"h ago"):t<168?"".concat(Math.floor(t/24),"d ago"):n.toLocaleDateString()}},4967:(e,n,s)=>{s.d(n,{A:()=>r});var a=s(5043),t=s(8431);const c=new class{async launchAnyDesk(e){try{const s=await t.indexedDBService.getMachine(e);if(!s)return{success:!1,method:"failed",error:"Machine not found"};await t.indexedDBService.logConnectionAttempt(e,"launch_attempt");const a="anydesk://".concat(s.anydeskId),c="https://anydesk.com/".concat(s.anydeskId);try{if(await this.openAnyDeskApp(a))return await t.indexedDBService.logConnectionAttempt(e,"launch_success","AnyDesk app launched"),{success:!0,method:"app"}}catch(n){console.log("AnyDesk app not available, trying web fallback")}try{return window.open(c,"_blank"),await t.indexedDBService.logConnectionAttempt(e,"launch_attempt","Opened web version"),{success:!0,method:"web"}}catch(n){return await t.indexedDBService.logConnectionAttempt(e,"launch_failure","Web fallback failed: ".concat(n)),{success:!1,method:"failed",error:"Failed to open AnyDesk app or web version"}}}catch(n){return console.error("AnyDesk launch error:",n),await t.indexedDBService.logConnectionAttempt(e,"launch_failure","Launch error: ".concat(n)),{success:!1,method:"failed",error:n instanceof Error?n.message:"Unknown error"}}}async openAnyDeskApp(e){return new Promise(n=>{const s=document.createElement("iframe");s.style.display="none",s.src=e;const a=setTimeout(()=>{document.body.removeChild(s),n(!1)},2e3),t=()=>{clearTimeout(a),document.body.removeChild(s),window.removeEventListener("focus",t),n(!0)};window.addEventListener("focus",t),document.body.appendChild(s);try{window.location.href=e,setTimeout(()=>{clearTimeout(a),document.body.removeChild(s),window.removeEventListener("focus",t),n(!0)},1e3)}catch(c){}})}async checkAnyDeskAvailability(){try{return!0}catch(e){return console.error("Error checking AnyDesk availability:",e),!1}}getAnyDeskDownloadUrl(){const e=navigator.userAgent.toLowerCase();return e.includes("windows")?"https://anydesk.com/downloads/windows":e.includes("mac")?"https://anydesk.com/downloads/macos":e.includes("linux")?"https://anydesk.com/downloads/linux":e.includes("android")?"https://play.google.com/store/apps/details?id=com.anydesk.anydeskandroid":e.includes("iphone")||e.includes("ipad")?"https://apps.apple.com/app/anydesk/id1114002967":"https://anydesk.com/downloads"}formatAnyDeskId(e){return e.replace(/\D/g,"").replace(/(\d{3})(?=\d)/g,"$1 ")}isValidAnyDeskId(e){const n=e.replace(/\D/g,"");return 9===n.length&&/^\d+$/.test(n)}getLaunchMessage(e,n){if(e.success){if("app"===e.method)return"AnyDesk app opened for ".concat(n,". If the connection doesn't start automatically, enter the ID: ").concat(e.method);if("web"===e.method)return"AnyDesk web version opened for ".concat(n,". You can also download the AnyDesk app for better experience.")}return"Failed to launch AnyDesk for ".concat(n,". ").concat(e.error||"Please ensure AnyDesk is installed or try again.")}};var o=s(4848),i=s(579);const r=e=>{let{machineId:n,machineName:s,anydeskId:t,size:r="md",variant:d="primary",onLaunchResult:l,className:h=""}=e;const[m,p]=(0,a.useState)(!1),[u,y]=(0,a.useState)(null);return(0,i.jsxs)("button",{className:(()=>{const e="anydesk-launch-btn-".concat(r),n="anydesk-launch-btn-".concat(d),s=m?"anydesk-launch-btn-loading":"",a=u?"anydesk-launch-btn-".concat(u.success?"success":"error"):"";return"".concat("anydesk-launch-btn"," ").concat(e," ").concat(n," ").concat(s," ").concat(a," ").concat(h).trim()})(),onClick:async()=>{if(!m)try{p(!0),y(null);const e=await c.launchAnyDesk(n);y(e),l&&l(e);const a=c.getLaunchMessage(e,s);if(e.success)"web"===e.method?alert("\u2705 ".concat(a,"\n\n\ud83d\udca1 Tip: Download AnyDesk app for better experience!")):alert("\u2705 ".concat(a));else{window.confirm("\u274c ".concat(a,"\n\nWould you like to download AnyDesk?"))&&window.open(c.getAnyDeskDownloadUrl(),"_blank")}}catch(e){console.error("Launch error:",e);const n={success:!1,method:"failed",error:e instanceof Error?e.message:"Unknown error"};y(n),l&&l(n),alert("\u274c Failed to launch AnyDesk: ".concat(n.error))}finally{p(!1)}},disabled:m,title:"Launch AnyDesk for ".concat(s," (ID: ").concat(t,")"),children:[(0,i.jsx)("span",{className:"anydesk-launch-btn-icon",children:m?(0,i.jsx)(o.A,{size:"sm"===r?"sm":"md"}):null!==u&&void 0!==u&&u.success?"\u2705":u&&!u.success?"\u274c":"\ud83d\ude80"}),(0,i.jsx)("span",{className:"anydesk-launch-btn-text",children:(()=>{if(m)return"sm"===r?"...":"Launching...";switch(d){case"icon":return"\ud83d\ude80";case"secondary":return"Connect to ".concat(s);default:return"Launch AnyDesk"}})()})]})}}}]);
//# sourceMappingURL=280.50634523.chunk.js.map