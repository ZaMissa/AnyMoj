"use strict";(self.webpackChunktemp_app=self.webpackChunktemp_app||[]).push([[732],{732:(e,n,s)=>{s.r(n),s.d(n,{default:()=>h});var a=s(5043),c=s(7697),t=s(8431),o=s(4848),i=s(4967),r=s(1713),d=s(579);const l=e=>{let{password:n,index:s}=e;const[c,t]=(0,a.useState)(!1);return(0,d.jsxs)("div",{className:"password-item",children:[(0,d.jsx)("span",{className:"password-value",children:c?n:"*".repeat(n.length)}),(0,d.jsx)("button",{className:"btn btn-sm",onClick:()=>t(!c),children:c?"Hide":"Show"}),(0,d.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>{navigator.clipboard.writeText(n),alert("Password copied to clipboard!")},children:"Copy"})]})},h=()=>{const{id:e}=(0,c.g)(),n=(0,c.Zp)(),[s,h]=(0,a.useState)(null),[m,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{e&&p(e)},[e]);const p=async e=>{try{u(!0);const s=await t.indexedDBService.getMachine(e);s?h(s):n("/")}catch(s){console.error("Failed to load machine:",s),n("/")}finally{u(!1)}};return m?(0,d.jsxs)("div",{className:"page-loading",children:[(0,d.jsx)(o.A,{size:"lg"}),(0,d.jsx)("p",{children:"Loading machine details..."})]}):s?(0,d.jsxs)("div",{className:"machine-detail",children:[(0,d.jsxs)("div",{className:"page-header",children:[(0,d.jsx)(c.N_,{to:"/",className:"btn btn-secondary",children:"\u2190 Back to Dashboard"}),(0,d.jsx)("h1",{className:"page-title",children:s.name})]}),(0,d.jsxs)("div",{className:"machine-info",children:[(0,d.jsxs)("div",{className:"info-section",children:[(0,d.jsx)("h3",{children:"Basic Information"}),(0,d.jsxs)("div",{className:"info-grid",children:[(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Machine ID"}),(0,d.jsx)("span",{className:"machine-id",children:s.id}),(0,d.jsx)("button",{className:"btn btn-secondary btn-sm copy-btn",onClick:()=>{navigator.clipboard.writeText(s.id),alert("Machine ID copied to clipboard!")},title:"Copy Machine ID",children:"\ud83d\udccb Copy ID"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"AnyDesk ID"}),(0,d.jsx)("span",{className:"anydesk-id",children:s.anydeskId}),(0,d.jsx)("button",{className:"btn btn-secondary btn-sm copy-btn",onClick:()=>{navigator.clipboard.writeText(s.anydeskId),alert("AnyDesk ID copied to clipboard!")},title:"Copy AnyDesk ID",children:"\ud83d\udccb Copy ID"}),(0,d.jsx)(i.A,{machineId:s.id,machineName:s.name,anydeskId:s.anydeskId,size:"sm",variant:"primary"})]}),s.address&&(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Address"}),(0,d.jsx)("span",{children:s.address})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Created"}),(0,d.jsx)("span",{children:(0,r.Yq)(s.createdAt)})]}),s.lastAccessed&&(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Last Accessed"}),(0,d.jsx)("span",{children:(0,r.Yq)(s.lastAccessed)})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Connections"}),(0,d.jsxs)("span",{children:[s.connectionCount," times"]})]})]})]}),s.notes&&(0,d.jsxs)("div",{className:"info-section",children:[(0,d.jsx)("h3",{children:"Notes"}),(0,d.jsx)("p",{className:"notes",children:s.notes})]}),s.passwords.length>0&&(0,d.jsxs)("div",{className:"info-section",children:[(0,d.jsx)("h3",{children:"Passwords"}),(0,d.jsx)("div",{className:"password-list",children:s.passwords.map((e,n)=>(0,d.jsx)(l,{password:e,index:n},n))})]}),s.tags.length>0&&(0,d.jsxs)("div",{className:"info-section",children:[(0,d.jsx)("h3",{children:"Tags"}),(0,d.jsx)("div",{className:"tags-list",children:s.tags.map((e,n)=>(0,d.jsx)("span",{className:"tag",children:e},n))})]}),s.categories.length>0&&(0,d.jsxs)("div",{className:"info-section",children:[(0,d.jsx)("h3",{children:"Categories"}),(0,d.jsx)("div",{className:"categories-list",children:s.categories.map((e,n)=>(0,d.jsx)("span",{className:"category",children:e},n))})]})]}),(0,d.jsxs)("div",{className:"page-actions",children:[(0,d.jsx)(i.A,{machineId:s.id,machineName:s.name,anydeskId:s.anydeskId,size:"lg",variant:"primary"}),(0,d.jsx)(c.N_,{to:"/machine/".concat(s.id,"/edit"),className:"btn btn-secondary",children:"Edit Machine"}),(0,d.jsx)("button",{onClick:async()=>{if(s&&window.confirm("Are you sure you want to delete this machine?"))try{await t.indexedDBService.deleteMachine(s.id),n("/")}catch(e){console.error("Failed to delete machine:",e)}},className:"btn btn-error",children:"Delete Machine"})]})]}):(0,d.jsxs)("div",{className:"page-error",children:[(0,d.jsx)("h2",{children:"Machine not found"}),(0,d.jsx)(c.N_,{to:"/",className:"btn btn-primary",children:"Back to Dashboard"})]})}},1713:(e,n,s)=>{s.d(n,{Yq:()=>c,_x:()=>o,fw:()=>t});const a=e=>e?e instanceof Date?e:new Date(e):null,c=e=>{const n=a(e);return n?n.toLocaleDateString():"Never"},t=e=>{const n=a(e);if(!n)return"Never";const s=new Date,c=Math.floor((s.getTime()-n.getTime())/6e4);return c<1?"Just now":c<60?"".concat(c,"m ago"):c<1440?"".concat(Math.floor(c/60),"h ago"):c<10080?"".concat(Math.floor(c/1440),"d ago"):n.toLocaleDateString()},o=e=>{const n=a(e);if(!n)return"Never";const s=new Date,c=Math.floor((s.getTime()-n.getTime())/36e5);return c<1?"Just now":c<24?"".concat(c,"h ago"):c<168?"".concat(Math.floor(c/24),"d ago"):n.toLocaleDateString()}},4967:(e,n,s)=>{s.d(n,{A:()=>r});var a=s(5043),c=s(8431);const t=new class{async launchAnyDesk(e){try{const s=await c.indexedDBService.getMachine(e);if(!s)return{success:!1,method:"failed",error:"Machine not found"};await c.indexedDBService.logConnectionAttempt(e,"launch_attempt");const a="anydesk://".concat(s.anydeskId),t="https://anydesk.com/".concat(s.anydeskId);try{if(await this.openAnyDeskApp(a))return await c.indexedDBService.logConnectionAttempt(e,"launch_success","AnyDesk app launched"),{success:!0,method:"app"}}catch(n){console.log("AnyDesk app not available, trying web fallback")}try{return window.open(t,"_blank"),await c.indexedDBService.logConnectionAttempt(e,"launch_attempt","Opened web version"),{success:!0,method:"web"}}catch(n){return await c.indexedDBService.logConnectionAttempt(e,"launch_failure","Web fallback failed: ".concat(n)),{success:!1,method:"failed",error:"Failed to open AnyDesk app or web version"}}}catch(n){return console.error("AnyDesk launch error:",n),await c.indexedDBService.logConnectionAttempt(e,"launch_failure","Launch error: ".concat(n)),{success:!1,method:"failed",error:n instanceof Error?n.message:"Unknown error"}}}async openAnyDeskApp(e){return new Promise(n=>{const s=document.createElement("iframe");s.style.display="none",s.src=e;const a=setTimeout(()=>{document.body.removeChild(s),n(!1)},2e3),c=()=>{clearTimeout(a),document.body.removeChild(s),window.removeEventListener("focus",c),n(!0)};window.addEventListener("focus",c),document.body.appendChild(s);try{window.location.href=e,setTimeout(()=>{clearTimeout(a),document.body.removeChild(s),window.removeEventListener("focus",c),n(!0)},1e3)}catch(t){}})}async checkAnyDeskAvailability(){try{return!0}catch(e){return console.error("Error checking AnyDesk availability:",e),!1}}getAnyDeskDownloadUrl(){const e=navigator.userAgent.toLowerCase();return e.includes("windows")?"https://anydesk.com/downloads/windows":e.includes("mac")?"https://anydesk.com/downloads/macos":e.includes("linux")?"https://anydesk.com/downloads/linux":e.includes("android")?"https://play.google.com/store/apps/details?id=com.anydesk.anydeskandroid":e.includes("iphone")||e.includes("ipad")?"https://apps.apple.com/app/anydesk/id1114002967":"https://anydesk.com/downloads"}formatAnyDeskId(e){return e.replace(/\D/g,"").replace(/(\d{3})(?=\d)/g,"$1 ")}isValidAnyDeskId(e){const n=e.replace(/\D/g,"");return 9===n.length&&/^\d+$/.test(n)}getLaunchMessage(e,n){if(e.success){if("app"===e.method)return"AnyDesk app opened for ".concat(n,". If the connection doesn't start automatically, enter the ID: ").concat(e.method);if("web"===e.method)return"AnyDesk web version opened for ".concat(n,". You can also download the AnyDesk app for better experience.")}return"Failed to launch AnyDesk for ".concat(n,". ").concat(e.error||"Please ensure AnyDesk is installed or try again.")}};var o=s(4848),i=s(579);const r=e=>{let{machineId:n,machineName:s,anydeskId:c,size:r="md",variant:d="primary",onLaunchResult:l,className:h=""}=e;const[m,u]=(0,a.useState)(!1),[p,y]=(0,a.useState)(null);return(0,i.jsxs)("button",{className:(()=>{const e="anydesk-launch-btn-".concat(r),n="anydesk-launch-btn-".concat(d),s=m?"anydesk-launch-btn-loading":"",a=p?"anydesk-launch-btn-".concat(p.success?"success":"error"):"";return"".concat("anydesk-launch-btn"," ").concat(e," ").concat(n," ").concat(s," ").concat(a," ").concat(h).trim()})(),onClick:async()=>{if(!m)try{u(!0),y(null);const e=await t.launchAnyDesk(n);y(e),l&&l(e);const a=t.getLaunchMessage(e,s);if(e.success)"web"===e.method?alert("\u2705 ".concat(a,"\n\n\ud83d\udca1 Tip: Download AnyDesk app for better experience!")):alert("\u2705 ".concat(a));else{window.confirm("\u274c ".concat(a,"\n\nWould you like to download AnyDesk?"))&&window.open(t.getAnyDeskDownloadUrl(),"_blank")}}catch(e){console.error("Launch error:",e);const n={success:!1,method:"failed",error:e instanceof Error?e.message:"Unknown error"};y(n),l&&l(n),alert("\u274c Failed to launch AnyDesk: ".concat(n.error))}finally{u(!1)}},disabled:m,title:"Launch AnyDesk for ".concat(s," (ID: ").concat(c,")"),children:[(0,i.jsx)("span",{className:"anydesk-launch-btn-icon",children:m?(0,i.jsx)(o.A,{size:"sm"===r?"sm":"md"}):null!==p&&void 0!==p&&p.success?"\u2705":p&&!p.success?"\u274c":"\ud83d\ude80"}),(0,i.jsx)("span",{className:"anydesk-launch-btn-text",children:(()=>{if(m)return"sm"===r?"...":"Launching...";switch(d){case"icon":return"\ud83d\ude80";case"secondary":return"Connect to ".concat(s);default:return"Launch AnyDesk"}})()})]})}}}]);
//# sourceMappingURL=732.b5c0a54b.chunk.js.map