{"version":3,"file":"static/js/249.ffc212b3.chunk.js","mappings":"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","sources":["services/export.service.ts","components/ExportImport.tsx","pages/Settings.tsx"],"sourcesContent":["import CryptoJS from 'crypto-js';\nimport { AppSettings, BackupData, ExportOptions, ImportResult } from '../types/machine.types';\n\nclass ExportService {\n  /**\n   * Export data to JSON format\n   */\n  async exportData(options: ExportOptions): Promise<Blob> {\n    const backupData: BackupData = {\n      version: '1.0.0',\n      exportDate: new Date(),\n      machines: [],\n      settings: {} as AppSettings,\n      history: []\n    };\n\n    // Get data based on export options\n    if (options.includeMachines) {\n      const { indexedDBService } = await import('./indexedDB.service');\n      if (options.selectedMachineIds && options.selectedMachineIds.length > 0) {\n        // Export selected machines only\n        for (const machineId of options.selectedMachineIds) {\n          const machine = await indexedDBService.getMachine(machineId);\n          if (machine) {\n            backupData.machines.push(machine);\n          }\n        }\n      } else {\n        // Export all machines\n        backupData.machines = await indexedDBService.getAllMachines();\n      }\n    }\n\n    if (options.includeSettings) {\n      const { indexedDBService } = await import('./indexedDB.service');\n      backupData.settings = await indexedDBService.getSettings();\n    }\n\n    if (options.includeHistory) {\n      const { indexedDBService } = await import('./indexedDB.service');\n      backupData.history = await indexedDBService.getConnectionHistory();\n    }\n\n    // Convert to JSON string\n    let jsonString = JSON.stringify(backupData, null, 2);\n\n    // Encrypt if requested\n    if (options.encrypt && options.password) {\n      const encrypted = CryptoJS.AES.encrypt(jsonString, options.password).toString();\n      const encryptedWrapper = {\n        encrypted: true,\n        data: encrypted,\n        version: backupData.version,\n        exportDate: backupData.exportDate\n      };\n      jsonString = JSON.stringify(encryptedWrapper, null, 2);\n      console.log('Encrypted export structure:', encryptedWrapper);\n    }\n\n    // Create blob with appropriate MIME type\n    const mimeType = options.encrypt ? 'application/json' : 'application/json';\n    return new Blob([jsonString], { type: mimeType });\n  }\n\n  /**\n   * Import data from JSON format\n   */\n  async importData(file: File, password?: string): Promise<ImportResult> {\n    const result: ImportResult = {\n      success: false,\n      importedMachines: 0,\n      importedSettings: false,\n      importedHistory: 0,\n      errors: [],\n      warnings: []\n    };\n\n    try {\n      // Read file content\n      const fileContent = await this.readFileAsText(file);\n      let backupData: BackupData;\n\n      try {\n        // Try to parse as JSON\n        const parsedData = JSON.parse(fileContent);\n\n        // Check if data is encrypted\n        if (parsedData.encrypted) {\n          if (!password) {\n            result.errors.push('File is encrypted but no password provided');\n            return result;\n          }\n\n          try {\n            // Decrypt the data\n            const decrypted = CryptoJS.AES.decrypt(parsedData.data, password).toString(CryptoJS.enc.Utf8);\n            if (!decrypted) {\n              result.errors.push('Invalid password or corrupted encrypted data');\n              return result;\n            }\n            \n            // Parse the decrypted JSON\n            try {\n              backupData = JSON.parse(decrypted);\n              console.log('Decrypted backup data structure:', backupData);\n            } catch (parseError) {\n              result.errors.push('Failed to parse decrypted data. File may be corrupted.');\n              console.error('JSON parse error:', parseError);\n              console.error('Decrypted string:', decrypted);\n              return result;\n            }\n          } catch (decryptError) {\n            result.errors.push('Failed to decrypt data. Check password.');\n            console.error('Decryption error:', decryptError);\n            return result;\n          }\n        } else {\n          backupData = parsedData;\n        }\n\n        // Validate backup data structure\n        if (!this.validateBackupData(backupData)) {\n          result.errors.push('Invalid backup file format. Expected: version, exportDate, machines, settings, history');\n          console.error('Validation failed for data:', backupData);\n          return result;\n        }\n\n        // Import data\n        await this.importBackupData(backupData, result);\n\n        result.success = true;\n      } catch (parseError) {\n        result.errors.push('Invalid JSON format in backup file');\n        return result;\n      }\n    } catch (fileError) {\n      result.errors.push(`Failed to read file: ${fileError}`);\n      return result;\n    }\n\n    return result;\n  }\n\n  /**\n   * Generate filename for export\n   */\n  generateFilename(options: ExportOptions): string {\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, 19);\n    const scope = options.selectedMachineIds ? 'selected' : 'all';\n    const encryption = options.encrypt ? 'encrypted' : 'plain';\n    return `machine-backup-${scope}-${encryption}-${timestamp}.json`;\n  }\n\n  /**\n   * Download blob as file\n   */\n  downloadBlob(blob: Blob, filename: string): void {\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = filename;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  }\n\n  /**\n   * Read file as text\n   */\n  private readFileAsText(file: File): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = (e) => resolve(e.target?.result as string);\n      reader.onerror = (e) => reject(e);\n      reader.readAsText(file);\n    });\n  }\n\n  /**\n   * Validate backup data structure\n   */\n  private validateBackupData(data: any): data is BackupData {\n    try {\n      // Check basic structure\n      if (!data || typeof data !== 'object') {\n        console.error('Validation failed: data is not an object');\n        return false;\n      }\n\n      // Check required fields\n      if (typeof data.version !== 'string') {\n        console.error('Validation failed: version is not a string', data.version);\n        return false;\n      }\n\n      if (!data.exportDate) {\n        console.error('Validation failed: exportDate is missing');\n        return false;\n      }\n\n      if (!Array.isArray(data.machines)) {\n        console.error('Validation failed: machines is not an array', data.machines);\n        return false;\n      }\n\n      if (!Array.isArray(data.history)) {\n        console.error('Validation failed: history is not an array', data.history);\n        return false;\n      }\n\n      if (!data.settings || typeof data.settings !== 'object') {\n        console.error('Validation failed: settings is not an object', data.settings);\n        return false;\n      }\n\n      return true;\n    } catch (error) {\n      console.error('Validation error:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Import backup data into IndexedDB\n   */\n  private async importBackupData(backupData: BackupData, result: ImportResult): Promise<void> {\n    const { indexedDBService } = await import('./indexedDB.service');\n\n    try {\n      // Import machines\n      for (const machine of backupData.machines) {\n        try {\n          const existingMachine = await indexedDBService.getMachine(machine.id);\n          \n          if (existingMachine) {\n            // Machine exists - update it\n            await indexedDBService.updateMachine(machine);\n            result.warnings.push(`Updated existing machine: ${machine.name}`);\n          } else {\n            // New machine - add it\n            await indexedDBService.addMachine(machine);\n            result.importedMachines++;\n          }\n        } catch (machineError) {\n          result.errors.push(`Failed to import machine ${machine.name}: ${machineError}`);\n        }\n      }\n\n      // Import history\n      for (const historyEntry of backupData.history) {\n        try {\n          await indexedDBService.addConnectionHistory(historyEntry);\n          result.importedHistory++;\n        } catch (historyError) {\n          result.warnings.push(`Failed to import history entry: ${historyError}`);\n        }\n      }\n\n      // Import settings (merge strategy)\n      try {\n        const currentSettings = await indexedDBService.getSettings();\n        const mergedSettings = this.mergeSettings(currentSettings, backupData.settings);\n        await indexedDBService.updateSettings(mergedSettings);\n        result.importedSettings = true;\n      } catch (settingsError) {\n        result.warnings.push(`Failed to import settings: ${settingsError}`);\n      }\n\n    } catch (error) {\n      result.errors.push(`Import failed: ${error}`);\n    }\n  }\n\n  /**\n   * Merge settings with existing settings\n   */\n  private mergeSettings(current: AppSettings, imported: AppSettings): AppSettings {\n    return {\n      ...current,\n      ...imported,\n      id: current.id, // Keep current ID\n      // Preserve some current settings while importing others\n      darkMode: imported.darkMode !== undefined ? imported.darkMode : current.darkMode,\n      autoBackup: imported.autoBackup !== undefined ? imported.autoBackup : current.autoBackup,\n      defaultEncryption: imported.defaultEncryption !== undefined ? imported.defaultEncryption : current.defaultEncryption,\n      // Merge categories and custom field definitions\n      categories: Array.from(new Set([...current.categories, ...imported.categories])),\n      customFieldDefinitions: this.mergeCustomFieldDefinitions(current.customFieldDefinitions, imported.customFieldDefinitions)\n    };\n  }\n\n  /**\n   * Merge custom field definitions\n   */\n  private mergeCustomFieldDefinitions(current: any[], imported: any[]): any[] {\n    const merged = [...current];\n    \n    for (const importedField of imported) {\n      const existingIndex = merged.findIndex(field => field.id === importedField.id);\n      if (existingIndex >= 0) {\n        // Update existing field\n        merged[existingIndex] = importedField;\n      } else {\n        // Add new field\n        merged.push(importedField);\n      }\n    }\n    \n    return merged;\n  }\n\n  /**\n   * Detect if file is encrypted\n   */\n  async detectEncryption(file: File): Promise<boolean> {\n    try {\n      const content = await this.readFileAsText(file);\n      const parsed = JSON.parse(content);\n      return parsed.encrypted === true;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Get export summary for UI display\n   */\n  async getExportSummary(options: ExportOptions): Promise<{\n    machineCount: number;\n    hasSettings: boolean;\n    hasHistory: boolean;\n    estimatedSize: string;\n  }> {\n    const { indexedDBService } = await import('./indexedDB.service');\n    \n    let machineCount = 0;\n    if (options.includeMachines) {\n      if (options.selectedMachineIds && options.selectedMachineIds.length > 0) {\n        machineCount = options.selectedMachineIds.length;\n      } else {\n        const allMachines = await indexedDBService.getAllMachines();\n        machineCount = allMachines.length;\n      }\n    }\n\n    const hasSettings = options.includeSettings;\n    \n    let hasHistory = false;\n    if (options.includeHistory) {\n      const history = await indexedDBService.getConnectionHistory();\n      hasHistory = history.length > 0;\n    }\n\n    // Estimate file size (rough calculation)\n    const estimatedSizeBytes = machineCount * 500 + (hasSettings ? 1000 : 0) + (hasHistory ? 200 : 0);\n    const estimatedSize = this.formatFileSize(estimatedSizeBytes);\n\n    return {\n      machineCount,\n      hasSettings,\n      hasHistory,\n      estimatedSize\n    };\n  }\n\n  /**\n   * Format file size for display\n   */\n  private formatFileSize(bytes: number): string {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  }\n\n  /**\n   * Test export/import cycle for debugging\n   */\n  async testExportImportCycle(password: string = 'test123'): Promise<boolean> {\n    try {\n      console.log('Testing export/import cycle...');\n\n      // Test export\n      const exportBlob = await this.exportData({\n        includeMachines: true,\n        includeSettings: true,\n        includeHistory: true,\n        selectedMachineIds: [],\n        encrypt: true,\n        password\n      });\n\n      // Create a test file from the blob\n      const testFile = new File([exportBlob], 'test-backup.json', { type: 'application/json' });\n\n      // Test import\n      const importResult = await this.importData(testFile, password);\n      \n      console.log('Test result:', importResult);\n      return importResult.success;\n    } catch (error) {\n      console.error('Test failed:', error);\n      return false;\n    }\n  }\n}\n\n// Export singleton instance\nexport const exportService = new ExportService();\n","import React, { useState, useRef } from 'react';\r\nimport { Machine } from '../types/machine.types';\r\nimport { exportService } from '../services/export.service';\r\nimport LoadingSpinner from './LoadingSpinner';\r\nimport './ExportImport.css';\r\n\r\ninterface ExportImportProps {\r\n  machines: Machine[];\r\n  onImportComplete?: (result: any) => void;\r\n}\r\n\r\nconst ExportImport: React.FC<ExportImportProps> = ({ machines, onImportComplete }) => {\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const [isImporting, setIsImporting] = useState(false);\r\n  const [exportOptions, setExportOptions] = useState({\r\n    includeMachines: true,\r\n    includeSettings: true,\r\n    includeHistory: true,\r\n    selectedMachineIds: [] as string[],\r\n    encrypt: false,\r\n    password: ''\r\n  });\r\n  const [importResult, setImportResult] = useState<any>(null);\r\n  const [showPasswordPrompt, setShowPasswordPrompt] = useState(false);\r\n  const [pendingFile, setPendingFile] = useState<File | null>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleExport = async () => {\r\n    if (exportOptions.encrypt && !exportOptions.password.trim()) {\r\n      alert('Please enter a password for encryption');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsExporting(true);\r\n      \r\n      const blob = await exportService.exportData(exportOptions);\r\n      const filename = exportService.generateFilename(exportOptions);\r\n      \r\n      exportService.downloadBlob(blob, filename);\r\n      \r\n      alert(`✅ Export completed! File: ${filename}`);\r\n    } catch (error) {\r\n      console.error('Export failed:', error);\r\n      alert(`❌ Export failed: ${error}`);\r\n    } finally {\r\n      setIsExporting(false);\r\n    }\r\n  };\r\n\r\n  const handleImport = async (file: File, password?: string) => {\r\n    try {\r\n      setIsImporting(true);\r\n      setImportResult(null);\r\n      \r\n      const result = await exportService.importData(file, password);\r\n      setImportResult(result);\r\n      \r\n      if (result.success) {\r\n        alert(`✅ Import completed!\\n\\nImported: ${result.importedMachines} machines, ${result.importedHistory} history entries${result.importedSettings ? ', settings' : ''}`);\r\n        if (onImportComplete) {\r\n          onImportComplete(result);\r\n        }\r\n      } else {\r\n        alert(`❌ Import failed:\\n${result.errors.join('\\n')}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Import failed:', error);\r\n      alert(`❌ Import failed: ${error}`);\r\n    } finally {\r\n      setIsImporting(false);\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    // Reset file input\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n\r\n    try {\r\n      const isEncrypted = await exportService.detectEncryption(file);\r\n      \r\n      if (isEncrypted) {\r\n        setPendingFile(file);\r\n        setShowPasswordPrompt(true);\r\n      } else {\r\n        await handleImport(file);\r\n      }\r\n    } catch (error) {\r\n      console.error('File processing error:', error);\r\n      alert(`❌ Failed to process file: ${error}`);\r\n    }\r\n  };\r\n\r\n  const handlePasswordSubmit = async (password: string) => {\r\n    if (pendingFile) {\r\n      setShowPasswordPrompt(false);\r\n      await handleImport(pendingFile, password);\r\n      setPendingFile(null);\r\n    }\r\n  };\r\n\r\n  const toggleMachineSelection = (machineId: string) => {\r\n    setExportOptions(prev => ({\r\n      ...prev,\r\n      selectedMachineIds: prev.selectedMachineIds.includes(machineId)\r\n        ? prev.selectedMachineIds.filter(id => id !== machineId)\r\n        : [...prev.selectedMachineIds, machineId]\r\n    }));\r\n  };\r\n\r\n  const selectAllMachines = () => {\r\n    setExportOptions(prev => ({\r\n      ...prev,\r\n      selectedMachineIds: machines.map(m => m.id)\r\n    }));\r\n  };\r\n\r\n  const clearMachineSelection = () => {\r\n    setExportOptions(prev => ({\r\n      ...prev,\r\n      selectedMachineIds: []\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"export-import\">\r\n      <h3>Export & Import Data</h3>\r\n      \r\n      {/* Export Section */}\r\n      <div className=\"export-section\">\r\n        <h4>Export Data</h4>\r\n        \r\n        <div className=\"export-options\">\r\n          <div className=\"option-group\">\r\n            <label className=\"checkbox-label\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={exportOptions.includeMachines}\r\n                onChange={(e) => setExportOptions(prev => ({ ...prev, includeMachines: e.target.checked }))}\r\n              />\r\n              Include Machines\r\n            </label>\r\n            \r\n            {exportOptions.includeMachines && (\r\n              <div className=\"machine-selection\">\r\n                <div className=\"selection-controls\">\r\n                  <button type=\"button\" onClick={selectAllMachines} className=\"btn btn-sm\">\r\n                    Select All\r\n                  </button>\r\n                  <button type=\"button\" onClick={clearMachineSelection} className=\"btn btn-sm\">\r\n                    Clear All\r\n                  </button>\r\n                </div>\r\n                <div className=\"machine-list\">\r\n                  {machines.map(machine => (\r\n                    <label key={machine.id} className=\"checkbox-label\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={exportOptions.selectedMachineIds.includes(machine.id)}\r\n                        onChange={() => toggleMachineSelection(machine.id)}\r\n                      />\r\n                      {machine.name} ({machine.anydeskId})\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <label className=\"checkbox-label\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={exportOptions.includeSettings}\r\n              onChange={(e) => setExportOptions(prev => ({ ...prev, includeSettings: e.target.checked }))}\r\n            />\r\n            Include Settings\r\n          </label>\r\n\r\n          <label className=\"checkbox-label\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={exportOptions.includeHistory}\r\n              onChange={(e) => setExportOptions(prev => ({ ...prev, includeHistory: e.target.checked }))}\r\n            />\r\n            Include Connection History\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"encryption-section\">\r\n          <label className=\"checkbox-label\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={exportOptions.encrypt}\r\n              onChange={(e) => setExportOptions(prev => ({ ...prev, encrypt: e.target.checked }))}\r\n            />\r\n            Encrypt Export\r\n          </label>\r\n          \r\n          {exportOptions.encrypt && (\r\n            <div className=\"password-input\">\r\n              <input\r\n                type=\"password\"\r\n                placeholder=\"Enter encryption password\"\r\n                value={exportOptions.password}\r\n                onChange={(e) => setExportOptions(prev => ({ ...prev, password: e.target.value }))}\r\n                className=\"form-input\"\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <button\r\n          onClick={handleExport}\r\n          disabled={isExporting}\r\n          className=\"btn btn-primary\"\r\n        >\r\n          {isExporting ? (\r\n            <>\r\n              <LoadingSpinner size=\"sm\" />\r\n              Exporting...\r\n            </>\r\n          ) : (\r\n            'Export Data'\r\n          )}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Import Section */}\r\n      <div className=\"import-section\">\r\n        <h4>Import Data</h4>\r\n        \r\n        <div className=\"import-info\">\r\n          <p>Import data from a previously exported backup file. The import will merge with existing data.</p>\r\n        </div>\r\n\r\n        <div className=\"file-input-container\">\r\n          <input\r\n            ref={fileInputRef}\r\n            type=\"file\"\r\n            accept=\".json\"\r\n            onChange={handleFileSelect}\r\n            className=\"file-input\"\r\n            id=\"import-file\"\r\n          />\r\n          <label htmlFor=\"import-file\" className=\"file-input-label\">\r\n            {isImporting ? (\r\n              <>\r\n                <LoadingSpinner size=\"sm\" />\r\n                Importing...\r\n              </>\r\n            ) : (\r\n              'Choose Backup File'\r\n            )}\r\n          </label>\r\n        </div>\r\n\r\n        {importResult && (\r\n          <div className={`import-result ${importResult.success ? 'success' : 'error'}`}>\r\n            <h5>Import Result</h5>\r\n            <p>✅ Imported: {importResult.importedMachines} machines, {importResult.importedHistory} history entries</p>\r\n            {importResult.importedSettings && <p>✅ Settings imported</p>}\r\n            {importResult.errors.length > 0 && (\r\n              <div className=\"errors\">\r\n                <h6>Errors:</h6>\r\n                <ul>\r\n                  {importResult.errors.map((error: string, index: number) => (\r\n                    <li key={index}>{error}</li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n            {importResult.warnings.length > 0 && (\r\n              <div className=\"warnings\">\r\n                <h6>Warnings:</h6>\r\n                <ul>\r\n                  {importResult.warnings.map((warning: string, index: number) => (\r\n                    <li key={index}>{warning}</li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Password Prompt Modal */}\r\n      {showPasswordPrompt && (\r\n        <div className=\"password-modal-overlay\">\r\n          <div className=\"password-modal\">\r\n            <h4>Encrypted File</h4>\r\n            <p>This backup file is encrypted. Please enter the password:</p>\r\n            <PasswordPrompt\r\n              onSubmit={handlePasswordSubmit}\r\n              onCancel={() => {\r\n                setShowPasswordPrompt(false);\r\n                setPendingFile(null);\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Password prompt component\r\nconst PasswordPrompt: React.FC<{\r\n  onSubmit: (password: string) => void;\r\n  onCancel: () => void;\r\n}> = ({ onSubmit, onCancel }) => {\r\n  const [password, setPassword] = useState('');\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (password.trim()) {\r\n      onSubmit(password.trim());\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"password-form\">\r\n      <input\r\n        type=\"password\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        placeholder=\"Enter password\"\r\n        className=\"form-input\"\r\n        autoFocus\r\n      />\r\n      <div className=\"form-actions\">\r\n        <button type=\"button\" onClick={onCancel} className=\"btn btn-secondary\">\r\n          Cancel\r\n        </button>\r\n        <button type=\"submit\" className=\"btn btn-primary\" disabled={!password.trim()}>\r\n          Import\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ExportImport;\r\n","import React, { useState, useEffect } from 'react';\nimport { AppSettings, Machine } from '../types/machine.types';\nimport { indexedDBService } from '../services/indexedDB.service';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport ExportImport from '../components/ExportImport';\nimport './Settings.css';\n\nconst Settings: React.FC = () => {\n  const [settings, setSettings] = useState<AppSettings | null>(null);\n  const [machines, setMachines] = useState<Machine[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n\n  useEffect(() => {\n    loadSettings();\n    loadMachines();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      setLoading(true);\n      const settingsData = await indexedDBService.getSettings();\n      setSettings(settingsData);\n    } catch (error) {\n      console.error('Failed to load settings:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadMachines = async () => {\n    try {\n      const allMachines = await indexedDBService.getAllMachines();\n      setMachines(allMachines);\n    } catch (error) {\n      console.error('Failed to load machines:', error);\n    }\n  };\n\n  const handleSettingChange = (field: keyof AppSettings, value: any) => {\n    if (settings) {\n      setSettings({ ...settings, [field]: value });\n    }\n  };\n\n  const saveSettings = async () => {\n    if (!settings) return;\n\n    try {\n      setSaving(true);\n      await indexedDBService.updateSettings(settings);\n      \n      // Apply dark mode class to document\n      if (settings.darkMode) {\n        document.documentElement.classList.add('dark');\n      } else {\n        document.documentElement.classList.remove('dark');\n      }\n    } catch (error) {\n      console.error('Failed to save settings:', error);\n      alert('Failed to save settings. Please try again.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n\n  const clearAllData = async () => {\n    if (!window.confirm('Are you sure you want to clear all data? This action cannot be undone.')) {\n      return;\n    }\n\n    if (!window.confirm('This will delete ALL machines, history, and settings. Are you absolutely sure?')) {\n      return;\n    }\n\n    try {\n      await indexedDBService.clearAllData();\n      alert('All data has been cleared. The app will reload.');\n      window.location.reload();\n    } catch (error) {\n      console.error('Failed to clear data:', error);\n      alert('Failed to clear data. Please try again.');\n    }\n  };\n\n  const handleImportComplete = async (result: any) => {\n    // Reload data after successful import\n    await loadSettings();\n    await loadMachines();\n  };\n\n  if (loading) {\n    return (\n      <div className=\"page-loading\">\n        <LoadingSpinner size=\"lg\" />\n        <p>Loading settings...</p>\n      </div>\n    );\n  }\n\n  if (!settings) {\n    return (\n      <div className=\"page-error\">\n        <h2>Failed to load settings</h2>\n        <button onClick={loadSettings} className=\"btn btn-primary\">\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"settings-page\">\n      <div className=\"page-header\">\n        <h1 className=\"page-title\">Settings</h1>\n        <p className=\"page-subtitle\">\n          Manage your app preferences and data\n        </p>\n      </div>\n\n      <div className=\"settings-sections\">\n        {/* Appearance Settings */}\n        <div className=\"settings-section\">\n          <h3>Appearance</h3>\n          \n          <div className=\"setting-item\">\n            <div className=\"setting-info\">\n              <label className=\"setting-label\">Dark Mode</label>\n              <p className=\"setting-description\">\n                Enable dark theme for better viewing in low light\n              </p>\n            </div>\n            <label className=\"toggle-switch\">\n              <input\n                type=\"checkbox\"\n                checked={settings.darkMode}\n                onChange={(e) => handleSettingChange('darkMode', e.target.checked)}\n                aria-label=\"Toggle dark mode\"\n              />\n              <span className=\"toggle-slider\"></span>\n            </label>\n          </div>\n        </div>\n\n        {/* Backup Settings */}\n        <div className=\"settings-section\">\n          <h3>Backup & Restore</h3>\n          \n          <div className=\"setting-item\">\n            <div className=\"setting-info\">\n              <label className=\"setting-label\">Auto Backup</label>\n              <p className=\"setting-description\">\n                Automatically backup data to browser storage\n              </p>\n            </div>\n            <label className=\"toggle-switch\">\n              <input\n                type=\"checkbox\"\n                checked={settings.autoBackup}\n                onChange={(e) => handleSettingChange('autoBackup', e.target.checked)}\n                aria-label=\"Toggle auto backup\"\n              />\n              <span className=\"toggle-slider\"></span>\n            </label>\n          </div>\n\n          <div className=\"setting-item\">\n            <div className=\"setting-info\">\n              <label className=\"setting-label\">Default Encryption</label>\n              <p className=\"setting-description\">\n                Encrypt exports by default (you can still choose per export)\n              </p>\n            </div>\n            <label className=\"toggle-switch\">\n              <input\n                type=\"checkbox\"\n                checked={settings.defaultEncryption}\n                onChange={(e) => handleSettingChange('defaultEncryption', e.target.checked)}\n                aria-label=\"Toggle default encryption\"\n              />\n              <span className=\"toggle-slider\"></span>\n            </label>\n          </div>\n        </div>\n\n        {/* Data Management */}\n        <div className=\"settings-section\">\n          <h3>Data Management</h3>\n          \n          <div className=\"setting-actions\">\n            <button onClick={clearAllData} className=\"btn btn-error\">\n              Clear All Data\n            </button>\n          </div>\n          \n          <div className=\"setting-info\">\n            <p>Use the Export & Import section below for advanced backup and restore functionality with encryption options.</p>\n          </div>\n        </div>\n\n        {/* Export/Import Section */}\n        <ExportImport \n          machines={machines} \n          onImportComplete={handleImportComplete}\n        />\n\n        {/* Save Button */}\n        <div className=\"settings-actions\">\n          <button\n            onClick={saveSettings}\n            disabled={saving}\n            className=\"btn btn-primary btn-lg\"\n          >\n            {saving ? <LoadingSpinner size=\"sm\" /> : 'Save Settings'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Settings;\n"],"names":["exportService","exportData","options","backupData","version","exportDate","Date","machines","settings","history","includeMachines","indexedDBService","selectedMachineIds","length","machineId","machine","getMachine","push","getAllMachines","includeSettings","getSettings","includeHistory","getConnectionHistory","jsonString","JSON","stringify","encrypt","password","encryptedWrapper","encrypted","data","CryptoJS","toString","console","log","mimeType","Blob","type","importData","file","result","success","importedMachines","importedSettings","importedHistory","errors","warnings","fileContent","this","readFileAsText","parsedData","parse","decrypted","decrypt","Utf8","parseError","error","decryptError","validateBackupData","importBackupData","fileError","concat","generateFilename","timestamp","toISOString","replace","slice","scope","encryption","downloadBlob","blob","filename","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","Promise","resolve","reject","reader","FileReader","onload","e","_e$target","target","onerror","readAsText","Array","isArray","id","updateMachine","name","addMachine","machineError","historyEntry","addConnectionHistory","historyError","currentSettings","mergedSettings","mergeSettings","updateSettings","settingsError","current","imported","_objectSpread","darkMode","undefined","autoBackup","defaultEncryption","categories","from","Set","customFieldDefinitions","mergeCustomFieldDefinitions","merged","importedField","existingIndex","findIndex","field","detectEncryption","content","_unused","getExportSummary","machineCount","hasSettings","hasHistory","estimatedSizeBytes","estimatedSize","formatFileSize","bytes","i","Math","floor","parseFloat","pow","toFixed","testExportImportCycle","arguments","exportBlob","testFile","File","importResult","PasswordPrompt","_ref2","onSubmit","onCancel","setPassword","useState","_jsxs","preventDefault","trim","className","children","_jsx","value","onChange","placeholder","autoFocus","onClick","disabled","_ref","onImportComplete","isExporting","setIsExporting","isImporting","setIsImporting","exportOptions","setExportOptions","setImportResult","showPasswordPrompt","setShowPasswordPrompt","pendingFile","setPendingFile","fileInputRef","useRef","handleImport","async","alert","join","checked","prev","selectAllMachines","map","m","clearMachineSelection","includes","toggleMachineSelection","filter","anydeskId","_Fragment","LoadingSpinner","size","ref","accept","_event$target$files","event","files","htmlFor","index","warning","Settings","setSettings","setMachines","loading","setLoading","saving","setSaving","useEffect","loadSettings","loadMachines","settingsData","allMachines","handleSettingChange","window","confirm","clearAllData","location","reload","ExportImport","documentElement","classList","add","remove"],"sourceRoot":""}